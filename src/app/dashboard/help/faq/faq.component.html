<f2ml-default-template [hiddenSideFaq]="true" *ngIf="metadata$ | async as metadata">
  <f2ml-default-card [title]="metadata.title" main>
    <div content class="faq__page">
      <mat-accordion class="faq__headers__align" *ngIf="metadata.faqs">
        <mat-expansion-panel *ngFor="let faq of metadata.faqs;let i = index" [expanded]="panelIndex == faq.id" [attr.data-index]="i" class="mat-elevation-z0" hideToggle (closed)="closePanel(faq.id)" (opened)="openPanel(faq.id)">
        <mat-expansion-panel-header>
          <mat-panel-title><span [class.is-bold]="faq.id === panelIndex">{{ faq.title }}</span></mat-panel-title>
          <mat-panel-description>
            <mat-icon [class.rotate90deg]="faq.id === panelIndex">arrow_forward_ios</mat-icon>
          </mat-panel-description>
        </mat-expansion-panel-header>

        <div *ngIf="faq.answer" class="faq__answer">
          <f2ml-wysiwyg-displayer [html]="faq.answer"></f2ml-wysiwyg-displayer>
        </div>
        <div *ngIf="faq.video" class="faq__video">
          <f2ml-youtube-video-player [videoUrl]="faq.video"></f2ml-youtube-video-player>
        </div>
        <div *ngIf="faq.cta" class="faq__cta">
          <a [href]="faq.cta.url" target="_blank">{{ faq.cta.title }}</a>
        </div>
        <div *ngIf="faq.image" class="faq__image">
          <img [src]="getFullUrl(faq.image.url)" [alt]="faq.image.alt"/>
        </div>
        <div *ngIf="faq.pdf" class="faq__pdf">
          <a [href]="getFullUrl(faq.pdf.url)" target="_blank">{{ faq.pdf.label }}</a>
        </div>

        <br/>
        <form class="faq__feedback__form">
          <span>{{ metadata.voteMetadata.question }}</span><br/>
          <mat-radio-group aria-label="Select an option">
            <mat-radio-button value="yes">{{ metadata.voteMetadata.yesLabel }}</mat-radio-button>
            <mat-radio-button value="no">{{ metadata.voteMetadata.noLabel }}</mat-radio-button>
          </mat-radio-group>
          <button mat-flat-button>{{ metadata.voteMetadata.submitCtaLabel }}</button>
        </form>
      <hr *ngIf="metadata.faqs.length > i+1"/>
    </mat-expansion-panel>
   </mat-accordion>
  </div>
 </f2ml-default-card>
</f2ml-default-template>

